% pack the features of a list of images into a single matrix where every
% row is the feature vector of the image with the same index

function feature_vector = pack_features(feat_name, imgs)
global sc;

feats_cell = {};
for i = 1:length(imgs)
    
    feat_save_path = fullfile(sc.feat_path, feat_name, [imgs(i).fullname(1:end-4) '.mat']);
    if(~exist(feat_save_path, 'file'))
        
        switch feat_name
            case 'dpatch'
                extract_feature(imgs(i).fullname(1:end-4), fullfile(sc.feat_path, feat_name), sc.njobs, sc.isparallel, sc.log_path);
        end
        
        
    end

end

feature_vector = reshape(cell2mat(feats_cell),  length(feats_cell{1}), length(feats_cell))';

end